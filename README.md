# KP-2024-SPRING

# RASA Open Source

## Установка
Открыть терминал в папке rasaOpenSource и выполнить команды pip install rasa и rasa train

## Использование
Открыть терминал в папке rasaOpenSource и выполнить команду rasa run

# Message Classification Agent

## Описание
Этот агент классификации сообщений используется для обработки текстовых данных и классификации сообщений с помощью внешнего сервиса Rasa. Он принимает входящие сообщения, обрабатывает их и классифицирует, а затем создает структуру в базе знаний, связывая класс сообщения, само сообщение и сущность.

## Установка
Установите все зависимости и проверьте что сервис Rasa настроен для взаимодействия с этим агентом и запущен.

## Использование
Для запуска агента необходимо инициализировать его. После получения события агент начнет обработку и классификацию сообщения.

## Класс MessageClassificationAgent
Этот класс отвечает за инициализацию агента, обработку событий и выполнение классификации сообщений.

### Методы
- init(): Инициализирует агента и логгирование.
- on_event(event_element, event_edge, action_element): Обрабатывает события и вызывает метод processing.
- processing(action_node): Выполняет обработку и классификацию сообщения.
- split_str(string): Разделяет классифицированную строку на сущность и вопрос.
- search_one_triple_with_role_relation(input, relation): Ищет тройку с ролевым отношением.
- search_one_triple_with_relation_reverse(input, relation): Ищет тройку с обратным отношением.
- search_one_triple(input): Ищет тройку.
- search_link(input): Ищет link_content в базе знаний.
- search_one_triple_reverse_class(input): Ищет класс обратной тройки.

## Функции
- connect_to_rasa(input_string): Отправляет языковой модели RASA строку на обработку. 

## Логгирование
Логгирование настроено для отслеживания основных событий и действий агента.

## Внешние зависимости
- sc_client: Клиент для взаимодействия с базой знаний.
- sc_kpm: Утилиты для работы с базой знаний.

# ReplyToMessagesAgent

## Описание
Этот агент предназначен для фильтрации структур в базе знаний. Он анализирует структуру и шаблон, сопоставляет их и генерирует новую структуру.

## Установка
Установите все необходимые зависимости.

## Использование
Для запуска агента необходимо инициализировать его. После активации он будет автоматически обрабатывать входящие сообщения и генерировать ответы.

## Класс ReplyToMessagesAgent
Этот класс отвечает за инициализацию агента, обработку событий и генерацию структуры.

### Методы
- init(): Инициализация агента.
- on_event(event_element, event_edge, action_element): Обработка событий.
- processing(action_node): Обработка действий и генерация структуры.
- check_edge(input, target): Проверка наличия ребра между элементами.
- add_edge(input, target): Добавление ребра между элементами.
- check_node(node): Проверка свойств узла.
- mapping(nodes): Сопоставление узлов и их свойств.
- search_one_triple_with_role_relation(input, relation): Поиск тройки с ролью отношения.
- search_one_triple_with_relation_reverse(input, relation): Поиск тройки с обратным отношением.
- search_triple(input): Поиск тройки.
- comparison(var, const): Сравнение переменных и констант.
- comparison_nodes(var, const): Сравнение узлов.
- comparison_node(var, const): Сравнение узла.

## Логгирование
Логгирование настроено для отслеживания основных событий и действий агента.

## Внешние зависимости
- sc_client: Клиент для взаимодействия с базой знаний.
- sc_kpm: Утилиты для работы с базой знаний.
